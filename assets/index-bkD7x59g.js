import{d as A,c as j,u as se,w as G,a as H}from"./components-NpX6qwsh.js";import{av as oe,a6 as te,aw as le,d as J,D as W,ax as K,a2 as q,ay as re,_ as B,e as w,m as U,v as O,x as S,f as ne,w as d,T as R,O as i,t as L,q as r,p as N,W as a,n as de,a8 as F,X as ue,r as D,F as me,U as ie,b as p,N as pe,P as c,$ as ce,a0 as ge}from"./index-h4E0gBbf.js";import{g as fe,a as X,b as ve,s as be}from"./elements-gKuY0iSU.js";import{l as Me}from"./shared-GaGJ2G_i.js";import{I as _e}from"./index-d-fOJT6v.js";import{A as z}from"./appType-xf773rte.js";const Q={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:A(),onReset:A()},Z=Symbol("FORM_BIND_FORM_ITEM_KEY");function Ve(){const{parentProvider:s,index:l,bindParent:m}=te(Z),u=le();return{index:l,form:s,bindForm:m?M=>{m({...M,instance:u})}:null}}function ye(){const{childProviders:s,length:l,bindChildren:m}=oe(Z);return{length:l,formItems:s,bindFormItems:m}}const{name:he,n:ke}=j("form"),$e=J({name:he,props:Q,setup(s){const l=W(()=>s.disabled),m=W(()=>s.readonly),{formItems:u,bindFormItems:v}=ye();v({disabled:l,readonly:m});function o(n){setTimeout(()=>{const g=fe(n),f=g===window?0:X(g),V=X(n)-f-ve(s.scrollToErrorOffsetY);be(g,{top:V,animation:Me})},300)}async function y(n){K(n);const g=await h();q(s.onSubmit,g)}function b(n){K(n),_(),q(s.onReset)}async function h(){var g;const n=await Promise.all(u.map(({validate:f})=>f()));if(s.scrollToError){const[,f]=re(n,$=>$===!1,s.scrollToError),V=f>-1;if(V){const $=(g=u[f].instance.proxy)==null?void 0:g.$el;o($)}return!V}return n.every(f=>f===!0)}function _(){return u.forEach(({reset:n})=>n())}function k(){return u.forEach(({resetValidation:n})=>n())}return{n:ke,handleSubmit:y,handleReset:b,validate:h,reset:_,resetValidation:k}}});function Te(s,l,m,u,v,M){return w(),U("form",{class:S(s.n()),onSubmit:l[0]||(l[0]=(...o)=>s.handleSubmit&&s.handleSubmit(...o)),onReset:l[1]||(l[1]=(...o)=>s.handleReset&&s.handleReset(...o))},[O(s.$slots,"default")],34)}const I=B($e,[["render",Te]]);I.useValidation=se;I.useForm=Ve;G(I);H(I,Q);const ee={errorMessage:{type:String,default:""},extraMessage:{type:String,default:""}},{name:we,n:Ce}=j("form-details"),Ue=J({name:we,props:ee,setup:()=>({n:Ce})}),Fe={key:0},xe={key:0};function Ee(s,l,m,u,v,M){return w(),ne(R,{name:s.n()},{default:d(()=>[s.errorMessage||s.extraMessage||s.$slots["extra-message"]?(w(),U("div",{key:0,class:S(s.n())},[N("div",{class:S(s.n("error-message"))},[r(R,{name:s.n("message")},{default:d(()=>[s.errorMessage?(w(),U("div",Fe,i(s.errorMessage),1)):L("v-if",!0)]),_:1},8,["name"])],2),N("div",{class:S(s.n("extra-message"))},[r(R,{name:s.n("message")},{default:d(()=>[O(s.$slots,"extra-message",{},()=>[s.extraMessage?(w(),U("div",xe,i(s.extraMessage),1)):L("v-if",!0)])]),_:3},8,["name"])],2)],2)):L("v-if",!0)]),_:3},8,["name"])}const Y=B(Ue,[["render",Ee]]);G(Y);H(Y,ee);const Se={__name:"CustomFormComponent",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},validateTrigger:{type:Array,default:()=>["onToggle"]},extraMessage:{type:String}},emits:["update:modelValue"],setup(s,{expose:l,emit:m}){const u=s,v=m,{useForm:M,useValidation:o}=I,{errorMessage:y,validateWithTrigger:b,validate:h,resetValidation:_}=o(),{bindForm:k,form:n}=M(),g=()=>h(u.rules,u.modelValue);function f(){v("update:modelValue",!1),_()}function V(x){de(()=>{const{validateTrigger:E,rules:C,modelValue:T}=u;b(E,x,C,T)})}function $(){u.readonly||u.disabled||n!=null&&n.readonly.value||n!=null&&n.disabled.value||(v("update:modelValue",!u.modelValue),V("onToggle"))}const P={reset:f,validate:g,resetValidation:_};return l(P),k==null||k(P),(x,E)=>{var C;return w(),U("div",{class:S(["var-custom-form-component",{"var-custom-form-component--disabled":s.disabled||((C=a(n))==null?void 0:C.disabled.value),"var-custom-form-component--error":a(y)}])},[N("div",{class:"var-custom-form-component__container",onClick:$},[r(a(_e),{class:"var-custom-form-component__icon",name:s.modelValue?"checkbox-marked-circle":"close-circle",transition:250},null,8,["name"]),O(x.$slots,"default",{},void 0,!0)]),r(a(Y),{"error-message":a(y),"extra-message":s.extraMessage},null,8,["error-message","extra-message"])],2)}}},Ie=B(Se,[["__scopeId","data-v-235f566f"]]),Pe={example:"表单示例",username:"请输入用户名",usernameMessage:"用户名不能为空",password:"请输入密码",passwordMessage:"请输入密码",passwordMinLengthMessage:"密码长度不能低于8位",department:"请选择部门",departmentMessage:"必须选一个部门",eat:"吃饭",sleep:"睡觉",play:"打游戏",departmentUnit:"部",group:"请选择组织",groupMessage:"至少选择一个组织",groupUnit:"组",genderMessage:"必须选择一个性别",male:"男",female:"女",rateMessage:"必须大于2",likeMessage:"至少选择一个爱好",licenseMessage:"您必须开启",countMessage:"必须大于10",rangeMessage:"必须大于10",filesMessage:"至少上传一张图片",customFormComponent:"自定义表单组件",customLabel:"点我切换",customErrorMessage:"必须是对勾",customExtraMessage:"附加信息",controller:"表单控制",reset:"清空表单",resetValidation:"清空验证",validate:"触发验证",disabled:"表单禁用",readonly:"表单只读"},Ne={example:"Form Example",username:"Please input username",usernameMessage:"The username cannot be empty",password:"Please input password",passwordMessage:"The password cannot be empty",passwordMinLengthMessage:"The password cannot be less than 8 characters",department:"Please select department",departmentMessage:"The select cannot be empty",eat:"Eat",sleep:"Sleep",play:"Play game",departmentUnit:" department",group:"Please select group",groupMessage:"The select cannot be empty",groupUnit:" group",genderMessage:"The gender cannot be empty",male:"Male",female:"Female",rateMessage:"It has to be greater than 2",likeMessage:"The select cannot be empty",licenseMessage:"You must turn on",countMessage:"It has to be greater than 10",rangeMessage:"It has to be greater than 10",filesMessage:"Upload at least one picture",customFormComponent:"Custom Form Component",customLabel:"Click toggle",customErrorMessage:"Please check it",customExtraMessage:"Extra message",controller:"Form control",reset:"Empty form",resetValidation:"Empty the validation",validate:"Trigger validation",disabled:"Form disabled",readonly:"Form readonly"},{add:ae,use:Be,t,merge:Xe}=F.useLocale(),Re=s=>{F.use(s),Be(s)};F.add("zh-CN",F.zhCN);F.add("en-US",F.enUS);ae("zh-CN",Pe);ae("en-US",Ne);const Le=s=>(ce("data-v-8cedebcb"),s=s(),ge(),s),De=Le(()=>N("div",{class:"space"},null,-1)),ze={__name:"index",setup(s){const l=ue({username:"",password:"",department:"",gender:void 0,license:!1,range:0,count:0,group:[],score:0,like:[],files:[],custom:!1}),m=D(null),u=D(!1),v=D(!1);return me(M=>{var o;Re(M),(o=m.value)==null||o.reset()}),ie(),(M,o)=>{const y=p("var-input"),b=p("var-option"),h=p("var-select"),_=p("var-radio"),k=p("var-radio-group"),n=p("var-checkbox"),g=p("var-checkbox-group"),f=p("var-rate"),V=p("var-switch"),$=p("var-counter"),P=p("var-slider"),x=p("var-uploader"),E=p("var-space"),C=p("var-form"),T=p("var-button");return w(),U(pe,null,[r(a(z),null,{default:d(()=>[c(i(a(t)("example")),1)]),_:1}),r(C,{ref_key:"form",ref:m,disabled:u.value,readonly:v.value,"scroll-to-error":"start","scroll-to-error-offset-y":"14.4vmin"},{default:d(()=>[r(E,{direction:"column",size:["4vmin",0]},{default:d(()=>[r(y,{placeholder:a(t)("username"),rules:[e=>!!e||a(t)("usernameMessage")],modelValue:l.username,"onUpdate:modelValue":o[0]||(o[0]=e=>l.username=e)},null,8,["placeholder","rules","modelValue"]),r(y,{type:"password",placeholder:a(t)("password"),rules:[e=>!!e||a(t)("passwordMessage"),e=>e.length>=8||a(t)("passwordMinLengthMessage")],modelValue:l.password,"onUpdate:modelValue":o[1]||(o[1]=e=>l.password=e)},null,8,["placeholder","rules","modelValue"]),r(h,{placeholder:a(t)("department"),rules:[e=>!!e||a(t)("departmentMessage")],modelValue:l.department,"onUpdate:modelValue":o[2]||(o[2]=e=>l.department=e)},{default:d(()=>[r(b,{label:`${a(t)("eat")}${a(t)("departmentUnit")}`},null,8,["label"]),r(b,{label:`${a(t)("sleep")}${a(t)("departmentUnit")}`},null,8,["label"]),r(b,{label:`${a(t)("play")}${a(t)("departmentUnit")}`},null,8,["label"])]),_:1},8,["placeholder","rules","modelValue"]),r(h,{multiple:"",placeholder:a(t)("group"),rules:[e=>e.length>=1||a(t)("groupMessage")],modelValue:l.group,"onUpdate:modelValue":o[3]||(o[3]=e=>l.group=e)},{default:d(()=>[r(b,{label:`${a(t)("eat")}${a(t)("groupUnit")}`},null,8,["label"]),r(b,{label:`${a(t)("sleep")}${a(t)("groupUnit")}`},null,8,["label"]),r(b,{label:`${a(t)("play")}${a(t)("groupUnit")}`},null,8,["label"])]),_:1},8,["placeholder","rules","modelValue"]),r(k,{rules:[e=>!!e||a(t)("genderMessage")],modelValue:l.gender,"onUpdate:modelValue":o[4]||(o[4]=e=>l.gender=e)},{default:d(()=>[r(_,{"checked-value":1},{default:d(()=>[c(i(a(t)("male")),1)]),_:1}),r(_,{"checked-value":2},{default:d(()=>[c(i(a(t)("female")),1)]),_:1})]),_:1},8,["rules","modelValue"]),r(g,{rules:[e=>e.length>0||a(t)("likeMessage")],modelValue:l.like,"onUpdate:modelValue":o[5]||(o[5]=e=>l.like=e)},{default:d(()=>[r(n,{"checked-value":1},{default:d(()=>[c(i(a(t)("eat")),1)]),_:1}),r(n,{"checked-value":2},{default:d(()=>[c(i(a(t)("sleep")),1)]),_:1}),r(n,{"checked-value":3},{default:d(()=>[c(i(a(t)("play")),1)]),_:1})]),_:1},8,["rules","modelValue"]),r(f,{rules:[e=>e>=3||a(t)("rateMessage")],modelValue:l.score,"onUpdate:modelValue":o[6]||(o[6]=e=>l.score=e)},null,8,["rules","modelValue"]),r(V,{variant:"",rules:[e=>!!e||a(t)("licenseMessage")],modelValue:l.license,"onUpdate:modelValue":o[7]||(o[7]=e=>l.license=e)},null,8,["rules","modelValue"]),r($,{rules:[e=>e>10||a(t)("countMessage")],modelValue:l.count,"onUpdate:modelValue":o[8]||(o[8]=e=>l.count=e)},null,8,["rules","modelValue"]),r(P,{rules:[e=>e>10||a(t)("rangeMessage")],modelValue:l.range,"onUpdate:modelValue":o[9]||(o[9]=e=>l.range=e)},null,8,["rules","modelValue"]),r(x,{rules:[e=>e.length>=1||a(t)("filesMessage")],modelValue:l.files,"onUpdate:modelValue":o[10]||(o[10]=e=>l.files=e)},null,8,["rules","modelValue"])]),_:1}),r(a(z),null,{default:d(()=>[c(i(a(t)("customFormComponent")),1)]),_:1}),r(a(Ie),{"extra-message":a(t)("customExtraMessage"),rules:[e=>!!e||a(t)("customErrorMessage")],modelValue:l.custom,"onUpdate:modelValue":o[11]||(o[11]=e=>l.custom=e)},{default:d(()=>[c(i(a(t)("customLabel")),1)]),_:1},8,["extra-message","rules","modelValue"])]),_:1},8,["disabled","readonly"]),r(a(z),null,{default:d(()=>[c(i(a(t)("controller")),1)]),_:1}),r(E,{direction:"column",size:["4vmin",0]},{default:d(()=>[r(T,{block:"",type:"danger",onClick:o[12]||(o[12]=e=>m.value.reset())},{default:d(()=>[c(i(a(t)("reset")),1)]),_:1}),r(T,{block:"",type:"warning",onClick:o[13]||(o[13]=e=>m.value.resetValidation())},{default:d(()=>[c(i(a(t)("resetValidation")),1)]),_:1}),r(T,{block:"",type:"success",onClick:o[14]||(o[14]=e=>m.value.validate())},{default:d(()=>[c(i(a(t)("validate")),1)]),_:1}),r(T,{block:"",type:"info",onClick:o[15]||(o[15]=e=>u.value=!u.value)},{default:d(()=>[c(i(a(t)("disabled")),1)]),_:1}),r(T,{block:"",type:"primary",onClick:o[16]||(o[16]=e=>v.value=!v.value)},{default:d(()=>[c(i(a(t)("readonly")),1)]),_:1})]),_:1}),De],64)}}},je=B(ze,[["__scopeId","data-v-8cedebcb"]]);export{je as default};
